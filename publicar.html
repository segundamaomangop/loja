<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Publicar An√∫ncio ‚Äì Segunda M√£o Mangop</title>
  <link rel="icon" type="image/jpeg" href="imagens/logo-mangop.jpg">
  <style>
    :root { --primary:#0077b6; --accent:#90e0ef; --bg:#f7fbff; --text:#023e8a; --card:#fff; }
    body { font-family:'Segoe UI',system-ui,sans-serif; margin:0; background:var(--bg); color:var(--text); }

    header { background:var(--primary); color:#fff; padding:1rem; display:flex; align-items:center; gap:1rem; flex-wrap:wrap; }
    header a { text-decoration:none; display:flex; align-items:center; gap:1rem; color:#fff; }
    header h1 { margin:0; font-size:1.2rem; }
    header p { margin:0; font-size:0.9rem; font-style:italic; }

    main { max-width:700px; margin:2rem auto; padding:1rem; background:var(--card); border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.08); }
    h2 { border-bottom:2px solid #eef0f4; padding-bottom:.5rem; }
    form { display:flex; flex-direction:column; gap:1rem; }
    label { font-weight:600; }
    input, select, textarea { padding:.6rem; border:1px solid #ccc; border-radius:6px; font-size:1rem; }
    button { background:var(--primary); color:#fff; border:none; padding:.7rem; border-radius:6px; cursor:pointer; font-size:1rem; font-weight:600; }

    .btn-acao { display:inline-block; margin:.5rem .3rem 0 0; padding:.6rem 1rem; border-radius:6px; font-weight:600; text-decoration:none; color:#fff; }
    .btn-whatsapp { background:#25D366; }
    .btn-publicar { background:#0077b6; }
    .btn-carrinho { background:#0096c7; }
    .btn-home { background:#ff8800; }

    footer { background:var(--accent); color:var(--text); text-align:center; padding:1rem; margin-top:2rem; line-height:1.6; }

    .success-message {
      margin-top:1rem;
      padding:0.8rem;
      background:#d4edda;
      color:#155724;
      border:1px solid #c3e6cb;
      border-radius:6px;
      font-weight:600;
      display:none;
    }
  </style>
</head>
<body>
  <header>
    <a href="index.html">
      <img src="imagens/logo-mangop.jpg" alt="Logomarca Segunda M√£o Mangop" style="height:100px; border-radius:8px;" />
      <div>
        <h1 id="site-title">Segunda M√£o Mangop</h1>
        <p id="site-slogan">N√£o √© lixo, √© oportunidade!!!</p>
      </div>
    </a>
    <div class="search-bar" style="display:flex; gap:0.5rem; flex-wrap:wrap;">
      <a href="publicar.html" class="btn-publicar">üì¢ Publicar an√∫ncio</a>
      <a href="https://wa.me/244976194731" target="_blank" class="btn-acao btn-whatsapp">
        <img src="imagens/whatsapp-logo.jpg" alt="WhatsApp" style="height:20px; vertical-align:middle; margin-right:6px;" /> WhatsApp
      </a>
      <a href="pagamento.html" class="btn-acao btn-pagamento">üîê Pagamento Seguro</a>
      <a href="carrinho.html" class="btn-acao btn-carrinho">üõí Carrinho</a>
    </div>
  </header>

  <main>
    <h2>üì¢ Publicar An√∫ncio</h2>
    <form id="formPublicar">
      <label for="titulo">T√≠tulo do produto</label>
      <input type="text" id="titulo" required placeholder="Ex: Mesa de jantar 6 lugares">

      <label for="descricao">Descri√ß√£o</label>
      <textarea id="descricao" rows="4" required placeholder="Detalhes do produto..."></textarea>

      <label for="categoria">Categoria</label>
      <select id="categoria" required>
        <option value="">Selecione</option>
        <option>M√≥veis</option><option>Eletr√≥nica</option><option>Moda</option>
        <option>Casa e Jardim</option><option>Ferramentas</option><option>Outros</option>
      </select>

      <label for="estado">Estado</label>
      <select id="estado" required>
        <option value="">Selecione</option>
        <option>Usado</option><option>Como novo</option><option>Selado</option>
      </select>

      <label for="preco">Pre√ßo (em Kz)</label>
      <input type="text" id="preco" required placeholder="Ex: 200.000,00" inputmode="numeric">
      <small style="color:#555;">Formato: milhares com ponto e decimais com v√≠rgula (ex.: 15.500,00)</small>

      <button type="submit">Enviar para WhatsApp</button>
      <div id="successMessage" class="success-message">‚úÖ An√∫ncio enviado com sucesso!</div>
    </form>
  </main>

  <footer>
    Segunda M√£o Mangop ‚Äì N√£o √© lixo, √© oportunidade<br>
    üìç Kilamba, Luanda ‚Äì Angola
  </footer>

  <script>
    const form = document.getElementById("formPublicar");
    const precoInput = document.getElementById("preco");
    const successMessage = document.getElementById("successMessage");

    // M√°scara AKZ: 2000000 ‚Üí 2.000.000,00
    precoInput.addEventListener("input", () => {
      let raw = precoInput.value.replace(/\D+/g, "");
      if (raw.length === 0) {
        precoInput.value = "";
        return;
      }
      raw = raw.replace(/^0+/, "");
      while (raw.length < 3) raw = "0" + raw;
      const intPart = raw.slice(0, -2);
      const decPart = raw.slice(-2);
      const formatted = intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ".") + "," + decPart;
      precoInput.value = formatted;
    });

    form.addEventListener("submit", function(e){
      e.preventDefault();
      const titulo = document.getElementById("titulo").value.trim();
      const descricao = document.getElementById("descricao").value.trim();
      const categoria = document.getElementById("categoria").value;
      const estado = document.getElementById("estado").value;
      const precoTexto = precoInput.value.trim();

      const precoNumero = parseFloat(precoTexto.replace(/\./g, "").replace(",", "."));
      const precoFormatado = precoNumero.toLocaleString("pt-PT", { minimumFractionDigits: 2, maximumFractionDigits: 2 });

      const mensagem = encodeURIComponent(
        `üì¢ Novo an√∫ncio:\n\n` +
        `T√≠tulo: ${titulo}\n` +
        `Descri√ß√£o: ${descricao}\n` +
        `Categoria: ${categoria}\n` +
        `Estado: ${estado}\n` +
        `Pre√ßo: ${precoFormatado} Kz\n\n` +
        `Por favor, anexar imagens do produto nesta conversa.`
      );

      window.open(`https://wa.me/244976194731?text=${mensagem}`, "_blank");

      successMessage.style.display = "block";
      form.reset();
      precoInput.value = "";

      setTimeout(() => { successMessage.style.display = "none"; }, 5000);
    });
  </script>
</body>
</html>
